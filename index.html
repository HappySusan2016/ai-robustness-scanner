<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Robustness Evaluation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f9fafb;
            color: #1a202c;
        }
        h1, h2 {
            color: #2d3748;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin-top: 12px;
        }
        th, td {
            border: 1px solid #e2e8f0;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #edf2f7;
        }
        .hidden-section {
            display: none;
        }
        .resistance-high {
            background-color: #c6f6d5; /* light green */
        }
        .resistance-medium {
            background-color: #fefcbf; /* light yellow */
        }
        .resistance-low {
            background-color: #feb2b2; /* light red */
        }
        .tooltip {
            position: relative;
            cursor: help;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #4a5568;
            color: #fff;
            text-align: center;
            border-radius: 5px;
            padding: 6px;
            position: absolute;
            z-index: 1;
            bottom: 125%; /* Position above */
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body>

    <h1>AI Robustness Evaluation Dashboard</h1>

    <!-- Attack Resistance Summary -->
    <section id="resistance-section">
        <h2>Attack Resistance Scores</h2>
        <table id="resistance-table">
            <tr><th>Attack Type</th><th>Resistance Score</th></tr>
        </table>
    </section>

    <!-- Evaluation Summary -->
    <section class="evaluation-summary" id="evaluation-summary">
        <h2>Evaluation Summary</h2>
        <table>
            <tr>
                <th>Metric</th>
                <th>Baseline</th>
                <th>Value</th>
                <th>Description</th>
            </tr>
            <tr>
                <td>Attack Success Rate</td>
                <td>0%</td>
                <td id="attack-success">-</td>
                <td>Percentage of attacks that successfully altered model output.</td>
            </tr>
            <tr>
                <td>Probability Drop</td>
                <td>0</td>
                <td id="prob-drop">-</td>
                <td>Average reduction in prediction confidence after attack.</td>
            </tr>
            <tr>
                <td>Computation Time</td>
                <td>0 s</td>
                <td id="comp-time">-</td>
                <td>Time required to execute the adversarial attack.</td>
            </tr>
            <tr>
                <td>Number of Model Calls</td>
                <td>0</td>
                <td id="model-calls">-</td>
                <td>How many times the model was queried during the attack.</td>
            </tr>
            <tr>
                <td>Average Distance</td>
                <td>0</td>
                <td id="avg-distance">-</td>
                <td>Magnitude of change between original and perturbed inputs.</td>
            </tr>
            <tr>
                <td>Ease of Exploitation</td>
                <td>-</td>
                <td id="ease-exploit">-</td>
                <td>How easy it is for an attacker to exploit the model.</td>
            </tr>
            <tr>
                <td>Resulting Classification</td>
                <td>-</td>
                <td><div id="classification" class="classification">-</div></td>
                <td>Model's output label after attack.</td>
            </tr>
        </table>
    </section>

    <script>
        // Example backend data
        const data = {
            resistance: {
                "FGSM": "95%",
                "PGD": "80%",
                "CW Attack": "60%",
                "DeepFool": "72%",
                "AutoAttack": "88%"
            },
            metrics: {
                attackSuccess: "12%",
                probDrop: "0.23",
                compTime: "1.4 s",
                modelCalls: "150",
                avgDistance: "0.035",
                easeExploit: "Medium",
                classification: "Cat"
            }
        };

        // Populate resistance table with color codes + tooltips
        const resistanceTable = document.getElementById('resistance-table');
        resistanceTable.innerHTML = "<tr><th>Attack Type</th><th>Resistance Score</th></tr>";

        for (const [attack, score] of Object.entries(data.resistance)) {
            let numericScore = parseInt(score);
            let scoreClass = "";
            let tooltipText = "";

            if (numericScore >= 90) {
                scoreClass = "resistance-high";
                tooltipText = "High Resistance: The model is very resilient against this attack.";
            } else if (numericScore >= 75) {
                scoreClass = "resistance-medium";
                tooltipText = "Medium Resistance: The model is somewhat resilient, but still vulnerable.";
            } else {
                scoreClass = "resistance-low";
                tooltipText = "Low Resistance: The model is highly vulnerable to this attack.";
            }

            const row = `<tr>
                <td>${attack}</td>
                <td class="${scoreClass} tooltip">${score}
                    <span class="tooltiptext">${tooltipText}</span>
                </td>
            </tr>`;
            resistanceTable.innerHTML += row;
        }

        // Populate evaluation metrics
        document.getElementById("attack-success").textContent = data.metrics.attackSuccess;
        document.getElementById("prob-drop").textContent = data.metrics.probDrop;
        document.getElementById("comp-time").textContent = data.metrics.compTime;
        document.getElementById("model-calls").textContent = data.metrics.modelCalls;
        document.getElementById("avg-distance").textContent = data.metrics.avgDistance;
        document.getElementById("ease-exploit").textContent = data.metrics.easeExploit;
        document.getElementById("classification").textContent = data.metrics.classification;
    </script>

</body>
</html>
